# Py JoinLogoSCP Encode
## 概要

* TSファイルまたはM2TS(拡張子をTSにすることで、TSファイルとして扱えるもの)を読み込み
* JoinLogoSCPで処理
* 上記処理でresultフォルダに出力されたin_cutcm_logo.avsをAviUtlでエンコード
* (ついでに処理状態をLine Notifyに投げる)

上記を自動化するためにpythonベースで作成したものです。

## 使い方
### 下準備
* JoinLogoSCPのセットアップ（ツールのインストール、ロゴファイル準備含む）が必要です。
* AviUtl+AUC+プラグイン出力(x264など)の設定が必要です。
* [JoinLogoSCPのセットアップ](https://enctools.com/join-logo-scp/#toc4)はこの辺が参考になると思います。
* [AviUtl+AUCのセットアップ](https://www.cg-method.com/aviutl-aviutl-control/)はこの辺が参考になると思います。
* AviUtlやプラグイン出力の設定はお好みで。

### ツールの設定
* 各ツールの保存先がデフォルト以外の場所の場合、初回起動時に選択画面が表示されます。
* ＜＜デフォルトの保存先画像挿入位置＞＞
* Line通知には別途設定が必要です。(必須ではありません。)
* Line通知を設定すると、「1/2「●動画名●」変換開始」などのメッセージがLineに届きます。

### Line通知をする場合
* Line Notifyのパーソナルアクセストークンを発行し、登録、テストする必要があります。
* [Line Notify](https://notify-bot.line.me/ja/)にアクセス、ログイン後「トークンを発行する」から発行してください。
* トークン名は何でも構いません。
* 通知の送信先は「1:1でLineNotifyから通知を受け取る」を選択してください。
* トークンは1度しか表示されません。何らかの理由で紛失した場合は削除、再作成してください。
* 本ツールを1度でも起動すると作成されるconf/config.iniをテキストエディタで開きます。
* [Line]の下にある「Key = 」にトークンを記入します。(例：Key = ABCDEF...)
* 記入後、起動するとテストメッセージが送信されます。送信できると有効になります。
* なお、無効にする場合は

### 処理の実行
1. 設定が全て完了していると、.tsまたは.m2tsの選択画面が表示されます。
2. 複数選択した場合はファイル名によるソート後、下記処理が開始されます。
3. ファイル名の末尾(123.tsの場合3の部分)に空白が含まれる場合、削除しリネームします。
1. ファイル名に全角空白が含まれる場合、半角空白に置換します。
1. .m2tsを選択すると.tsにリネームします。
1. jlse_bat.batに処理を投げます。(設定されている場合、Line通知されます。)
1. 完了後、aviutlをaucにより起動、in_cutcm.avsを読み込み、指定のプラグイン出力を開始します。
1. 複数ファイルの場合、次のファイルを対象に3.から繰り返します。
1. (設定されている場合、Lineに完了を通知します。)

## その他
* 動画を選択したのに動かない場合は主にパスに問題があるか、それぞれのツールが手動でも動かない状態である可能性があります。
パスを確認し、手動で問題なく動作するか確認してください。

